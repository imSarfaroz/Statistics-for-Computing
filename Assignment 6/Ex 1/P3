# Problem Set #6
# Sarfaroz Yunusov
# Ex 1 (Part3)

import pylab
import math
from scipy.stats import t
import pylab, random, scipy
from scipy import stats
from scipy.stats import ttest_ind

def meanOfList(list):
    sum = 0
    for i in list:
        sum = sum + i
    
    mean = sum/len(list)
    return mean

def squaredDeviation(list):
    # finding  the mean
    sum = 0
    for i in list:
        sum = sum + i  # the sum of all int numbers in the list
        
    mean = sum/len(list)  # the dev of sum of ints in list and the lengt of the list
    #print(mean)
    
    devs = 0        #deviation
    for j in list:
        devs = devs + (j - mean) ** 2  # the sum of squared deviation score

    return devs # returning the sum of squared dev using the definitial formula

def standardDeviation(list):
    return math.sqrt(squaredDeviation(list) / (len(list) - 1))

def statistics(list1, list2):
    DF = len(list1) - 1 + (len(list2) - 1)
    print("degree of freedom: ", DF)
    
    sd = ((squaredDeviation(list1) + squaredDeviation(list2)) / ((len(list1) - 1) + (len(list2) - 1)))

    SEM = math.sqrt(sd / len(list1) + sd / len(list2))
    tTest = ((meanOfList(list1) - meanOfList(list2)) / SEM)
    print("independent sample T-test: %.3f"%tTest)

    meanDiff = (meanOfList(list1) - meanOfList(list2))
    numofSample = len(list1)
    MeanOfSample = meanDiff
    SEM1 = SEM
    lower_cutoff = t.ppf(0.025, numofSample - 1, loc = MeanOfSample, scale = SEM1) 
    upper_cutoff = t.ppf(0.975, numofSample - 1, loc = MeanOfSample, scale = SEM1)

    print("Confidence interval(95) is: [%.3f, %.3f]"%(lower_cutoff,upper_cutoff))
    
    tStat, twoTailProb = ttest_ind(list1, list2)
    print('significance: ', (twoTailProb))


statistics([64, 68, 84, 65, 50, 60, 81, 76],
           [53, 44, 61, 50, 40, 39, 58, 42])
